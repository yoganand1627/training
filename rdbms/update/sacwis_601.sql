--STGAP00015585 - Release(N/A) Create an NCANDS table for Release 3.4

--Update the NCANDS job to write the results to the NCANDS table with a new column
-- added to the NCANDS table.  The new column should be called PERSON_ID that 
--indicates this is the unique SHINES person id.  Bare in mind that the PERSON ID is 
--not the same as the Record Number.  The Record Number could be the IDS AFCARS 
--identifier or the encrypted SHINES person id.  This column should be the last one 
--on the table.

CREATE TABLE CAPS.NCANDS(
SUBYR VARCHAR(4),
STATERR VARCHAR(2),
RPTID VARCHAR(12),
CHID VARCHAR(12),
RPTCNTY VARCHAR(3),
RPTDT VARCHAR(8),
INVSTDT VARCHAR(8),
RPTSRC VARCHAR(2),
RPTDISP VARCHAR(2),
RPTDISDT VARCHAR(8),
NOTIFS VARCHAR(1),
CHAGE VARCHAR(2),
CHILD_BDATE VARCHAR(8),
CHILD_SEX VARCHAR(1),
CHILD_RACE_AMERIND VARCHAR(1),
CHILD_RACE_ASIAN VARCHAR(1),
CHILD_RACE_BLACK VARCHAR(1),
CHILD_RACE_HAWAII_PAC VARCHAR(1),
CHILD_RACE_WHITE VARCHAR(1),
CHILD_RACE_UNABLE VARCHAR(1),
CHILD_ISP VARCHAR(1),
CHILD_CNTY VARCHAR(3),
CHILD_LVNG VARCHAR(2),
CHILD_MIL VARCHAR(1),
CHILD_PRIOR VARCHAR(1),
CHILD_MAL_1 VARCHAR(1),
CHILD_MALDISP_1 VARCHAR(2),
CHILD_MAL_2 VARCHAR(1),
CHILD_MALDISP_2 VARCHAR(2),
CHILD_MAL_3 VARCHAR(1),
CHILD_MALDISP_3 VARCHAR(2),
CHILD_MAL_4 VARCHAR(1),
CHILD_MALDISP_4 VARCHAR(2),
CHILD_MAL_DEATH	VARCHAR(1),
CDALC VARCHAR(1),
CDDRUG VARCHAR(1),
CDRTRD VARCHAR(1),
CDEMOTNL VARCHAR(1),
CDVISUAL VARCHAR(1),
CDLEARN VARCHAR(1),
CDPHYS VARCHAR(1),
CDBEHAV VARCHAR(1),
CDMEDICL VARCHAR(1),
FCALC VARCHAR(1),
FCDRUG VARCHAR(1),
FCRTRD VARCHAR(1),
FCEMOTNL VARCHAR(1),
FCVISUAL VARCHAR(1),
FCLEARN VARCHAR(1),
FCPHYS VARCHAR(1),
FCMEDICL VARCHAR(1),
FCVIOL VARCHAR(1),
FCHOUSE VARCHAR(1),
FCMONEY VARCHAR(1),
FCPUBLIC VARCHAR(1),
POSTSERV VARCHAR(1),
SERVDATE VARCHAR(8),
FAMSUP VARCHAR(1),
FAMPRES VARCHAR(1),
FOSTERCR VARCHAR(1),
RMVDATE VARCHAR(8),
JUVPET VARCHAR(1),
PETDATE VARCHAR(8),
COCHREP VARCHAR(1),
ADOPT VARCHAR(1),
CASEMANAG VARCHAR(1),
COUNSEL VARCHAR(1),
DAYCARE VARCHAR(1),
EDUCATN VARCHAR(1),
EMPLOY VARCHAR(1),
FAMPLAN VARCHAR(1),
HEALTH VARCHAR(1),
HOMEBASE VARCHAR(1),
HOUSING VARCHAR(1),
TRANSLIV VARCHAR(1),
INFOREF VARCHAR(1),
LEGAL VARCHAR(1),
MENTHLTH VARCHAR(1),
PREGPAR VARCHAR(1),
RESPITE VARCHAR(1),
SSDISABL VARCHAR(1),
SSDELINQ VARCHAR(1),
SUBABUSE VARCHAR(1),
TRANSPRT VARCHAR(1),
OTHERSV VARCHAR(1),
WRKRID VARCHAR(12),
SUPRVID VARCHAR(12),
PER_ID_1 VARCHAR(12),
PER_REL_1 VARCHAR(2),
PER_PRNT_1 VARCHAR(1),
PER_CR_1 VARCHAR(1),
PER_AGE_1 VARCHAR(2),
PER_SEX_1 VARCHAR(1),
PER_RACE_INDIAN_1 VARCHAR(1),
PER_RACE_ASIAN_1 VARCHAR(1),
PER_RACE_BLACK_1 VARCHAR(1),
PER_RACE_HAWAII_PAC_1 VARCHAR(1),
PER_RACE_WHITE_1 VARCHAR(1),
PER_RACE_UNABLE_1 VARCHAR(1),
PER_HISP_1 VARCHAR(1),
PER_MIL_1 VARCHAR(1),
PER_PRIOR_1 VARCHAR(1),
PER_MAL1_1 VARCHAR(1),
PER_MAL2_1 VARCHAR(1),
PER_MAL3_1 VARCHAR(1),
PER_MAL4_1 VARCHAR(1),
PER_ID_2 VARCHAR(12),
PER_REL_2 VARCHAR(2),
PER_PRNT_2 VARCHAR(1),
PER_CR_2 VARCHAR(1),
PER_AGE_2 VARCHAR(2),
PER_SEX_2 VARCHAR(1),
PER_RACE_INDIAN_2 VARCHAR(1),
PER_RACE_ASIAN_2 VARCHAR(1),
PER_RACE_BLACK_2 VARCHAR(1),
PER_RACE_HAWAII_PAC_2 VARCHAR(1),
PER_RACE_WHITE_2 VARCHAR(1),
PER_RACE_UNABLE_2 VARCHAR(1),
PER_HISP_2 VARCHAR(1),
PER_MIL_2 VARCHAR(1),
PER_PRIOR_2 VARCHAR(1),
PER_MAL1_2 VARCHAR(1),
PER_MAL2_2 VARCHAR(1),
PER_MAL3_2 VARCHAR(1),
PER_MAL4_2 VARCHAR(1),
PER_ID_3 VARCHAR(12),
PER_REL_3 VARCHAR(2),
PER_PRNT_3 VARCHAR(1),
PER_CR_3 VARCHAR(1),
PER_AGE_3 VARCHAR(2),
PER_SEX_3 VARCHAR(1),
PER_RACE_INDIAN_3 VARCHAR(1),
PER_RACE_ASIAN_3 VARCHAR(1),
PER_RACE_BLACK_3 VARCHAR(1),
PER_RACE_HAWAII_PAC_3 VARCHAR(1),
PER_RACE_WHITE_3 VARCHAR(1),
PER_RACE_UNABLE_3 VARCHAR(1),
PER_HISP_3 VARCHAR(1),
PER_MIL_3 VARCHAR(1),
PER_PRIOR_3 VARCHAR(1),
PER_MAL1_3 VARCHAR(1),
PER_MAL2_3 VARCHAR(1),
PER_MAL3_3 VARCHAR(1),
PER_MAL4_3 VARCHAR(1),
AFCARS_ID VARCHAR(12),
INCIDENT_DATE VARCHAR(8),
PERSON_ID VARCHAR(12)) tablespace data01;

grant select,update,insert,delete on CAPS.NCANDS to capson,capsbat,ops$datafix;
grant select on caps.NCANDS to operator;


insert into caps.schema_version(id_schema_version,application_version,comments)
            values (602, 'SacwisRev3', 'Release N/A - DBCR 15585');

commit;

